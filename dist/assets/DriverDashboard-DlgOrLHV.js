import{c as b,g as N,r as f,i as y,k as v,j as e,B as c,l as i,D as w,M as l,d as D,T as R,e as r,L as S,m as k,n as L,z as d,h as M}from"./index-CCoYmBKk.js";import{g as O}from"./Map-Du-ehJKC.js";const C=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],o=b("power",C),q=()=>{const{user:x}=N(s=>s.auth),[a,m]=f.useState(x?.status==="active"),[h,{isLoading:g}]=y(),{data:n,isLoading:p}=v(void 0,{skip:!a}),t=[23.8103,90.4125],j=async()=>{try{const s=a?"offline":"online";k?await L.updateStatus(s,{latitude:t[0],longitude:t[1]}):await h({status:s,location:{latitude:t[0],longitude:t[1]}}).unwrap(),m(!a),d.success(`You are now ${s}`)}catch(s){const u=M(s,"DriverDashboard","Failed to update status");d.error(u)}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Driver Dashboard"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${a?"bg-green-100 text-green-800 shadow-sm":"bg-gray-100 text-gray-800"}`,children:a?"ðŸŸ¢ Online":"âš« Offline"}),e.jsxs(c,{onClick:j,variant:a?"danger":"primary",isLoading:g,size:"sm",className:"ripple",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),a?"Go Offline":"Go Online"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(i,{label:"Today's Earnings",value:"à§³450",icon:e.jsx(w,{className:"h-6 w-6"}),color:"bg-green-500",trend:{value:12,isPositive:!0}}),e.jsx(i,{label:"Completed Rides",value:"8",icon:e.jsx(l,{className:"h-6 w-6"}),color:"bg-indigo-500",trend:{value:5,isPositive:!0}}),e.jsx(i,{label:"Online Time",value:"6.5h",icon:e.jsx(D,{className:"h-6 w-6"}),color:"bg-blue-500"}),e.jsx(i,{label:"Rating",value:"4.8",icon:e.jsx(R,{className:"h-6 w-6"}),color:"bg-yellow-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(r,{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(l,{className:"text-indigo-600"}),"Your Location"]}),e.jsx("div",{className:"h-[350px] rounded-lg overflow-hidden",children:e.jsx(O,{center:t,zoom:14,markers:[{position:t,popup:"Your current location"}]})})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Incoming Requests"}),a?e.jsx("div",{className:"space-y-3",children:p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(S,{className:"animate-spin h-8 w-8 text-indigo-600"})}):n&&n.length>0?n.map(s=>e.jsx("div",{className:"border border-gray-200 p-4 rounded-lg hover:border-indigo-300 transition-all hover:shadow-md",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"New Ride Request"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Request ID: ",s.id||s._id]})]}),e.jsx(c,{size:"sm",variant:"primary",children:"Accept"})]})},s.id||s._id)):e.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-3 shadow-sm",children:e.jsx(l,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"font-medium",children:"No active requests"}),e.jsx("p",{className:"text-sm mt-1",children:"Scanning for nearby riders..."})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[e.jsx(o,{className:"h-12 w-12 mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"You are offline"}),e.jsx("p",{className:"text-sm mt-1",children:"Go online to receive ride requests"})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(r,{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Weekly Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Earnings"}),e.jsx("span",{className:"font-bold text-gray-900",children:"à§³2,850"})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Rides"}),e.jsx("span",{className:"font-bold text-gray-900",children:"42"})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg. Rating"}),e.jsx("span",{className:"font-bold text-gray-900",children:"4.8 â­"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Online Hours"}),e.jsx("span",{className:"font-bold text-gray-900",children:"38.5h"})]})]})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b last:border-b-0",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(l,{className:"h-4 w-4 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Completed ride"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Gulshan to Dhanmondi"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s,"h ago"]})]}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["à§³",120+s*10]})]},s))})]})]})]})]})};export{q as default};
